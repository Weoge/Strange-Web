<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Egor delete "K"</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .content {
      flex: 1;
      width: 100%;
      max-width: 800px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
    }
    
    .btn {
      position: relative;
      padding: 12px 40px;
      font-size: 16px;
      font-weight: 600;
      color: #333;
      background-color: white;
      border: none;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 8px;
      height: 100%;
      background-color: #42a5f5;
      transition: all 0.3s ease;
      z-index: 0;
    }
    
    .btn span {
      position: relative;
      z-index: 1;
    }
    
    .btn:hover::before {
      width: 100%;
      opacity: 0.2;
    }
    
    .btn:hover {
      color: #42a5f5;
    }
    
    .font-item {
      margin: 15px 0;
      width: 100%;
      text-align: center;
      padding: 10px 0;
    }
    
    .loading {
      display: none;
      margin: 20px;
      color: #666;
    }
    
    .footer {
      margin-top: auto;
      padding: 20px;
      width: 100%;
      display: flex;
      justify-content: center;
    }
  </style>
</head>
<body>
  <!-- TODO add Entry -->
  <div class="content">
    <div id="fonts-container"></div>
  </div>
  
  <div class="footer">
    <button class="btn" id="loadFontsBtn"><span>Next</span></button>
  </div>
  
  <div id="loading" class="loading">Loading fonts...</div>

  <script>
    const API_KEY = 'AIzaSyDmUfPYY5gu2eM2I1MH5xqdHudvEUVxadg';
    const TEXT_TO_DISPLAY = 'Egor delete "K"';
    const FONTS_PER_LOAD = 100;
    
    let currentOffset = 0;
    let allFonts = [];
    let loadedFonts = new Set();

    async function loadFontsList() {
      document.getElementById('loading').style.display = 'block';
      const response = await fetch(
        `https://www.googleapis.com/webfonts/v1/webfonts?key=${API_KEY}&sort=popularity`
      );
      const data = await response.json();
      allFonts = data.items;
      document.getElementById('loading').style.display = 'none';
      return true;
    }

    async function showNextFonts() {
      if (allFonts.length === 0) {
        if (!await loadFontsList()) {
          alert('Failed to load fonts');
          return;
        }
      }
      
      const start = currentOffset;
      const end = Math.min(currentOffset + FONTS_PER_LOAD, allFonts.length);
      const fontsToLoad = allFonts.slice(start, end);
      
      if (fontsToLoad.length === 0) {
        alert('All fonts loaded!');
        return;
      }
      
      currentOffset = end;
      
      injectFontStyles(fontsToLoad);
      renderText(fontsToLoad);
    }

    function injectFontStyles(fonts) {
      const newFonts = fonts.filter(font => !loadedFonts.has(font.family));
      if (newFonts.length === 0) return;
      
      const link = document.createElement('link');
      const fontFamilies = newFonts.map(font => 
        `family=${font.family.replace(/ /g, '+')}`
      ).join('&');
      
      link.href = `https://fonts.googleapis.com/css2?${fontFamilies}&display=swap`;
      link.rel = 'stylesheet';
      document.head.appendChild(link);
      
      newFonts.forEach(font => loadedFonts.add(font.family));
    }

    function renderText(fonts) {
      const container = document.getElementById('fonts-container');
      fonts.forEach(font => {
        const div = document.createElement('div');
        div.className = 'font-item';
        div.innerHTML = `
          <div style="font-family:'${font.family}'; font-size: 24px;">
            ${TEXT_TO_DISPLAY}
          </div>
        `;
        container.appendChild(div);
      });
    }

    document.getElementById('loadFontsBtn').addEventListener('click', showNextFonts);
  </script>
</body>
</html>
